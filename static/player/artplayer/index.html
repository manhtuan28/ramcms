<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modern Video Player</title>
    <script src="https://cdn.jwplayer.com/libraries/IDzF9Zmk.js"></script>
    <style>
        html,
        body {
            width: 100%;
            height: 100%;
            padding: 0;
            margin: 0;
            font-family: Arial, sans-serif;
            background-color: #000;
        }

        #videodiv {
            width: 100%;
            height: 100%;
            background: #000;
            position: relative;
        }

        .jw-progress-bar {
            background-color: #f00 !important;
        }

        .jw-progress {
            background: #f00 !important;
        }

        .jw-slider {
            border-radius: 5px;
        }

        .jw-controlbar {
            background: rgba(0, 0, 0, 0.8);
        }

        .jw-icon {
            color: #fff;
        }
    </style>
</head>

<body>
    <div id="videodiv"></div>

    <script>
        const TVC_VIDEO = "https://bigf.bigo.sg/asia_live/V4s7/2U4Jt3.mp4";
        const TVC_PLAY_DURATION = 3;
        const IS_AUTO_SKIP_TVC = true;

        const videoUrl = parent.MacPlayer.PlayUrl;
        jwplayer.key = "MBvrieqNdmVL4jV0x6LPJ0wKB/Nbz2Qq/lqm3g==";

        function setupJWPlayer(url) {
            jwplayer("videodiv").setup({
                file: url,
                image: parent.player_aaaa.vod_data.vod_poster || parent.player_aaaa.vod_data.vod_pic,
                width: "100%",
                height: "100%",
                autostart: true,
                aspectratio: "16:9",
                controls: true,
                advertising: {
                    client: "vast",
                    admessage: "Your video will resume in xx seconds",
                    adtimeout: 3000,
                    tag: TVC_VIDEO,
                    skipoffset: TVC_PLAY_DURATION
                },
                events: {
                    onReady: function () {
                        if (IS_AUTO_SKIP_TVC) {
                            let playDuration = TVC_PLAY_DURATION;
                            const skipInterval = setInterval(() => {
                                if (playDuration <= 0) {
                                    jwplayer().removeAd();
                                    clearInterval(skipInterval);
                                }
                                playDuration--;
                            }, 1000);
                        }
                    },
                    onComplete: onVideoEnded
                }
            });
        }

        function setupIframe(url) {
            const playerDiv = document.getElementById('videodiv');
            playerDiv.innerHTML = '';
            const iframe = document.createElement('iframe');
            Object.assign(iframe, {
                src: url,
                border: '0',
                marginWidth: '0',
                marginHeight: '0',
                frameBorder: '0',
                scrolling: 'no',
                allowfullscreen: 'allowfullscreen'
            });
            playerDiv.appendChild(iframe);
        }

        function onVideoEnded() {
            jwplayer().stop();
            const playerDiv = document.getElementById('videodiv');
            playerDiv.innerHTML = '';
            const iframe = document.createElement('iframe');
            Object.assign(iframe, {
                src: parent.MacPlayer.PlayUrl,
                border: '0',
                marginWidth: '0',
                marginHeight: '0',
                frameBorder: '0',
                scrolling: 'no',
                allowfullscreen: 'allowfullscreen'
            });
            playerDiv.appendChild(iframe);
        }

        if (videoUrl.endsWith('.m3u8') || videoUrl.endsWith('.mp4')) {
            setupJWPlayer(videoUrl);
        } else {
            setupIframe(videoUrl);
        }
    </script>
</body>

</html>